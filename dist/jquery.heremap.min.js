/**
* jQuery.heremap - jQuery plugin to facilitate the use of HereMap API
* @version v0.0.1
* @link https://github.com/romeroyonatan/jqueryheremap
* @author Yonatan Romero - yromero@openmailbox.org
* @license GPL-3.0
*/
(function(){var e,n,a,r,t,o,l,p,i=[].slice;e=window.jQuery||window.Zepto||window.$,e.heremap={},e.heremap.fn={},e.fn.heremap=function(){var n,a;return a=arguments[0],n=2<=arguments.length?i.call(arguments,1):[],null==a&&(a="init"),e.heremap.fn[a].apply(this,n)},p=null,l=null,o=function(){if("undefined"==typeof H||null===H)throw new Error("Don't forget include 'http://js.api.here.com/v3/3.0/mapsjs-core.js'");return p=new H.service.Platform({app_id:e.fn.heremap.options.app_id,app_code:e.fn.heremap.options.app_code}),l=p.createDefaultLayers()},a=function(n){var a,r;return r=e(n).data("center"),null!=r&&(a=/(-?\d+.?\d*),(-?\d+.?\d*)/.exec(r),null!=a)?{lat:parseFloat(a[1]),lng:parseFloat(a[2])}:e.fn.heremap.options.center},t=function(n){var a,r;return r=e(n).data("zoom"),null!=r&&(a=/(\d+)/.exec(r),null!=a)?parseInt(a[1]):e.fn.heremap.options.zoom},r=function(n){var a,r,t,o;return o=e(n).data("markers"),a=[],null!=o&&(t=/((-?\d+.?\d*),(-?\d+.?\d*))+/g,a=function(){var e;for(e=[];r=t.exec(o);)e.push({lat:parseFloat(r[2]),lng:parseFloat(r[3])});return e}()),a},e.heremap.fn.addMarker=function(n){return null!=n?this.each(function(a,r){var t;return t=e(r).data("heremap"),null!=t&&t.addObject(new H.map.Marker(n)),0===(null!=t?t.getCenter().lat:void 0)&&0===(null!=t?t.getCenter().lng:void 0)&&null!=t?t.setCenter(n):void 0}):void 0},e.heremap.fn.resize=function(){return this.each(function(n,a){var r;return r=e(a).data("heremap"),null!=r?r.getViewPort().resize():void 0})},e.heremap.fn.map=function(){return e(this).data("heremap")},n=function(n){var o,p,i,u,d,c,h,f,m;for(d=new H.Map(n,l.normal.map,{zoom:t(n),center:a(n)}),e(n).data({heremap:d}),f=r(n),i=0,u=f.length;u>i;i++)h=f[i],e(n).heremap("addMarker",h);return m=e(n).data("controls"),null!=m&&m&&H.ui.UI.createDefault(d,l,e.fn.heremap.options.lang),p=e(n).data("interact"),null!=p&&p?(c=new H.mapevents.MapEvents(d),o=new H.mapevents.Behavior(c)):void 0},e.heremap.fn.init=function(a){return a=e.extend({},e.fn.heremap.options,a),this.length>0?(o(a),this.each(function(e,a){return n(a)})):void 0},e.fn.heremap.options={app_id:"",app_code:"",zoom:10,center:{lat:0,lng:0},lang:"en-US"},e(document).on("ready",function(){return e("[data-heremap]").heremap()})}).call(this);