(function(){var e,n,a,r,t,o,p,l,i=[].slice;e=window.jQuery||window.Zepto||window.$,e.heremap={},e.heremap.fn={},e.fn.heremap=function(){var n,a;return a=arguments[0],n=2<=arguments.length?i.call(arguments,1):[],null==a&&(a="init"),e.heremap.fn[a].apply(this,n)},l=null,p=null,o=function(){if("undefined"==typeof H||null===H)throw new Error("Don't forget include 'http://js.api.here.com/v3/3.0/mapsjs-core.js'");return l=new H.service.Platform({app_id:e.fn.heremap.options.app_id,app_code:e.fn.heremap.options.app_code}),p=l.createDefaultLayers()},a=function(n){var a,r;return r=e(n).data("center"),null!=r&&(a=/(-?\d+.?\d*),(-?\d+.?\d*)/.exec(r),null!=a)?{lat:parseFloat(a[1]),lng:parseFloat(a[2])}:e.fn.heremap.options.center},t=function(n){var a,r;return r=e(n).data("zoom"),null!=r&&(a=/(\d+)/.exec(r),null!=a)?parseInt(a[1]):e.fn.heremap.options.zoom},r=function(n){var a,r,t,o;return o=e(n).data("markers"),a=[],null!=o&&(t=/((-?\d+.?\d*),(-?\d+.?\d*))+/g,a=function(){var e;for(e=[];r=t.exec(o);)e.push({lat:parseFloat(r[2]),lng:parseFloat(r[3])});return e}()),a},e.heremap.fn.addMarker=function(n){return null!=n?this.each(function(a,r){var t;return t=e(r).data("heremap"),null!=t?(t.addObject(new H.map.Marker(n)),0===t.getCenter().lat&&0===t.getCenter().lng?t.setCenter(n):void 0):void 0}):void 0},n=function(n){var o,l,i,u,d,c,f,h,m;for(d=new H.Map(n,p.normal.map,{zoom:t(n),center:a(n)}),e(n).data({heremap:d}),h=r(n),i=0,u=h.length;u>i;i++)f=h[i],e(n).heremap("addMarker",f);return m=e(n).data("controls"),null!=m&&m&&H.ui.UI.createDefault(d,p,e.fn.heremap.options.lang),l=e(n).data("interact"),null!=l&&l?(c=new H.mapevents.MapEvents(d),o=new H.mapevents.Behavior(c)):void 0},e.heremap.fn.init=function(a){return a=e.extend({},e.fn.heremap.options,a),this.length>0?(o(a),this.each(function(e,a){return n(a)})):void 0},e.fn.heremap.options={app_id:"",app_code:"",zoom:10,center:{lat:0,lng:0},lang:"en-US"},e(document).on("ready",function(){return e("[data-heremap]").heremap()})}).call(this);