(function(){var e,n,r,a,t,o,l,p,i=[].slice;e=window.jQuery||window.Zepto||window.$,e.heremap={},e.heremap.fn={},e.fn.heremap=function(){var n,r;return r=arguments[0],n=2<=arguments.length?i.call(arguments,1):[],null==r&&(r="init"),e.heremap.fn[r].apply(this,n)},p=null,l=null,o=function(){if("undefined"==typeof H||null===H)throw new Error("Don't forget include 'http://js.api.here.com/v3/3.0/mapsjs-core.js'");return p=new H.service.Platform({app_id:e.fn.heremap.options.app_id,app_code:e.fn.heremap.options.app_code}),l=p.createDefaultLayers()},r=function(n){var r,a;return a=e(n).data("center"),null!=a&&(r=/(-?\d+.?\d*),(-?\d+.?\d*)/.exec(a),null!=r)?{lat:parseFloat(r[1]),lng:parseFloat(r[2])}:e.fn.heremap.options.center},t=function(n){var r,a;return a=e(n).data("zoom"),null!=a&&(r=/(\d+)/.exec(a),null!=r)?parseInt(r[1]):e.fn.heremap.options.zoom},a=function(n){var r,a,t,o;return o=e(n).data("markers"),r=[],null!=o&&(t=/((-?\d+.?\d*),(-?\d+.?\d*))+/g,r=function(){var e;for(e=[];a=t.exec(o);)e.push({lat:parseFloat(a[2]),lng:parseFloat(a[3])});return e}()),r},e.heremap.fn.addMarker=function(n){return null!=n?this.each(function(r,a){var t;return t=e(a).data("heremap"),null!=t&&t.addObject(new H.map.Marker(n)),0===(null!=t?t.getCenter().lat:void 0)&&0===(null!=t?t.getCenter().lng:void 0)&&null!=t?t.setCenter(n):void 0}):void 0},e.heremap.fn.resize=function(){return this.each(function(n,r){var a;return a=e(r).data("heremap"),null!=a?a.getViewPort().resize():void 0})},n=function(n){var o,p,i,u,d,c,f,h,m;for(d=new H.Map(n,l.normal.map,{zoom:t(n),center:r(n)}),e(n).data({heremap:d}),h=a(n),i=0,u=h.length;u>i;i++)f=h[i],e(n).heremap("addMarker",f);return m=e(n).data("controls"),null!=m&&m&&H.ui.UI.createDefault(d,l,e.fn.heremap.options.lang),p=e(n).data("interact"),null!=p&&p?(c=new H.mapevents.MapEvents(d),o=new H.mapevents.Behavior(c)):void 0},e.heremap.fn.init=function(r){return r=e.extend({},e.fn.heremap.options,r),this.length>0?(o(r),this.each(function(e,r){return n(r)})):void 0},e.fn.heremap.options={app_id:"",app_code:"",zoom:10,center:{lat:0,lng:0},lang:"en-US"},e(document).on("ready",function(){return e("[data-heremap]").heremap()})}).call(this);