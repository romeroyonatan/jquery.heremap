(function(){var e,n,t,a,r,o,p,l,u;e=window.jQuery||window.Zepto||window.$,l=null,p=null,o=function(){if("undefined"==typeof H||null===H)throw new Error("Don't forget include 'http://js.api.here.com/v3/3.0/mapsjs-core.js'");return l=new H.service.Platform({app_id:e.fn.heremap.options.app_id,app_code:e.fn.heremap.options.app_code}),p=l.createDefaultLayers()},t=function(n){var t,a;return a=e(n).attr("data-center"),null!=a&&(t=/(-?\d+.?\d*),(-?\d+.?\d*)/.exec(a),null!=t)?{lat:parseFloat(t[1]),lng:parseFloat(t[2])}:e.fn.heremap.options.center},r=function(n){var t,a;return a=e(n).attr("data-zoom"),null!=a&&(t=/(\d+)/.exec(a),null!=t)?parseInt(t[1]):e.fn.heremap.options.zoom},a=function(n){var t,a,r,o;return o=e(n).attr("data-markers"),null!=o&&(r=/((-?\d+.?\d*),(-?\d+.?\d*))+/g,t=function(){var e;for(e=[];a=r.exec(o);)e.push({lat:parseFloat(a[2]),lng:parseFloat(a[3])});return e}()),t},u=function(e,n){var t,a,r,o,p;if(null!=n){for(p=[],r=0,o=n.length;o>r;r++)a=n[r],e.addObject(new H.map.Marker(a)),t=e.getCenter(),0===t.lat&&0===t.lng?p.push(e.setCenter(a)):p.push(void 0);return p}},n=function(n){var o,l,i,d,c;return i=new H.Map(n,p.normal.map,{zoom:r(n),center:t(n)}),u(i,a(n)),e(n).data({heremap:i}),c=e(n).attr("data-controls"),null!=c&&"true"===c.toLowerCase()&&H.ui.UI.createDefault(i,p,e.fn.heremap.options.lang),l=e(n).attr("data-interact"),null!=l&&"true"===l.toLowerCase()?(d=new H.mapevents.MapEvents(i),o=new H.mapevents.Behavior(d)):void 0},e.fn.heremap=function(t){return t=e.extend({},e.fn.heremap.options,t),this.length>0?(o(t),this.each(function(e,t){return n(t)})):void 0},e.fn.heremap.options={app_id:"",app_code:"",zoom:10,center:{lat:0,lng:0},lang:"en-US"},e(document).on("ready",function(){return e("[data-heremap]").heremap()})}).call(this);